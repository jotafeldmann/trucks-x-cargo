# How it works

This document explains how that solution was developed and how it can be explored.

## Visual demonstration

![docs/kibana_preview.png](docs/kibana_preview.png)
<small> Preview generated by Kibana </small>

## Algorithms

### Calculating distances

- The default distance calculation use the [Harvesine formula](https://en.wikipedia.org/wiki/Haversine_formula)

```bash
make dev
```

- More accurate, you can use the Google Routes remote provider (you must provide GOOGLE_API_KEY env var):
```bash
make run/remote
```


### Designating trucks for cargos

Five different algorithms was developed, with 2 remaining:

- Iteration O log(n<sup>2</sup>) + sorted dictionary
The classic cargos x trucks iteration (sorted dictionary)

```bash
make run
```

-  Iteration only for cargos + O log(n) kd-tree (optimized when the trucks are loaded):
While the trucks are loaded, for each truck appended, we use a kd-tree to manage the locations.

```bash
make run/kdtree
```

## How to dev

- Watch for modifications, run lint and tests
```bash
make dev/watch
```

- Run dev mode (with performance chekc)
```bash
make dev
```

- Apply lint corrections (90% effective)
```bash
make lint/fix
```
